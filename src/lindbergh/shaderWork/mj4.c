#include "common.h"

// Fragment
SearchReplace mj4FsMesa[] = {
    {"OPTION NV_fragment_program2;", ""},
    {"SHORT TEMP", "TEMP"},
    {"SHORT OUTPUT", "OUTPUT"},

    {"ADDR ", "ADD "},
    {"DP3R ", "DP3 "},
    {"RSQR ", "RSQ "},
    {"MADR ", "MAD "},
    {"MULR ", "MUL "},
    {"LITR ", "LIT "},
    {"MOVR ", "MOV "},
    {"MINR ", "MIN "},
    {"MAXR ", "MAX "},
    {"SEQR ", "#SEQR "},
    {"RCPR ", "RCP "},
    {"SLTR ", "SLT "},
    {"FLRR ", "FLR "},

    {"SGERC ", "SGE "},
    {"SEQRC ", "#SEQRC "},
    {"SLTRC ", "SLT "},
    {"MULXC ", "MUL "},
    {"MOVXC ", "MOV "},
    {"SEQX ", "#SEQX "},
    {"MULX ", "MUL "},

    {"MOVH ", "MOV "},
    {"MINH ", "MIN "},
    {"ADDH ", "ADD "},
    {"MADH ", "MAD "},
    {"MULH ", "MUL "},
    {"DP4H ", "DP4 "},
    {"RSQH ", "RSQ "},
    {"RCPH ", "RCP "},
    {"DP3H ", "DP3 "},
    {"LITH ", "LIT "},
    /*{"DP2H ", "#DP2H "},*/

    {"MULH_SAT ", "MUL_SAT "},
    {"MULR_SAT ", "MUL_SAT "},

    {"KIL ", "#KIL "},
    {"(NE.x)", " "},
    {"IF ", "#IF "},
    {"ELSE;", " "},
    {"ENDIF;", " "},
    {"(NE)", " "},
    {"(EQ)", " "},
    {"(EQ.x)", " "},

    {"POWR ", "POW "}, // MJ4Evo
    {"POWH ", "POW "},
    {"MAXH ", "MAX "},
    {"NRMH  H4.xyz, fragment.texcoord[4];",
     "DP3 H1.x, fragment.texcoord[4], fragment.texcoord[4];RSQ H1.x, H1.x;MUL H4.xyz, fragment.texcoord[4], H1.x;"},
    {"NRMH  H6.xyz, fragment.texcoord[3];",
     "DP3 H1.x, fragment.texcoord[3], fragment.texcoord[3];RSQ H1.x, H1.x;MUL H6.xyz, fragment.texcoord[3], H1.x;"},

    {"NRMH  H0.xyz, H7;", "DP3 H4.x, H7, H7;RSQ H4.x, H4.x;MUL H0.xyz, H7, H4.x;MOV H0.w, 0.0;"},
    {"NRMH  H0.xyz, H8;", "DP3 H4.x, H8, H8;RSQ H4.x, H4.x;MUL H0.xyz, H8, H4.x;MOV H0.w, 0.0;"},
    {"NRMH  H1.xyz, H7;", "DP3 H4.x, H7, H7;RSQ H4.x, H4.x;MUL H1.xyz, H7, H4.x;MOV H1.w, 0.0;"},
    {"NRMH  H1.xyz, H8;", "DP3 H4.x, H8, H8;RSQ H4.x, H4.x;MUL H1.xyz, H8, H4.x;MOV H1.w, 0.0;"},
    {"NRMH  H2.xyz, H6;", "DP3 H4.x, H6, H6;RSQ H4.x, H4.x;MUL H2.xyz, H6, H4.x;MOV H2.w, 0.0;"},
    {"NRMH  H2.xyz, H7;", "DP3 H4.x, H7, H7;RSQ H4.x, H4.x;MUL H2.xyz, H7, H4.x;MOV H2.w, 0.0;"},
    {"NRMH  H2.xyz, H8;", "DP3 H4.x, H8, H8;RSQ H4.x, H4.x;MUL H2.xyz, H8, H4.x;MOV H2.w, 0.0;"},
    {"NRMH  H3.xyz, H6;", "DP3 H2.x, H6, H6;RSQ H2.x, H2.x;MUL H3.xyz, H6, H2.x;MOV H3.w, 0.0;"},
    {"NRMH  H3.xyz, H7;", "DP3 H2.x, H7, H7;RSQ H2.x, H2.x;MUL H3.xyz, H7, H2.x;MOV H3.w, 0.0;"},
    {"NRMH  H4.xyz, H7;", "DP3 H3.x, H7, H7;RSQ H3.x, H3.x;MUL H4.xyz, H7, H3.x;MOV H4.w, 0.0;"},
    {"NRMH  H4.xyz, H8;", "DP3 H3.x, H8, H8;RSQ H3.x, H3.x;MUL H4.xyz, H8, H3.x;MOV H4.w, 0.0;"},
    {"NRMH  H5.xyz, H0;", "DP3 H2.x, H0, H0;RSQ H2.x, H2.x;MUL H5.xyz, H0, H2.x;MOV H5.w, 0.0;"},
    {"NRMH  H5.xyz, H2;", "DP3 H4.x, H2, H2;RSQ H4.x, H4.x;MUL H5.xyz, H2, H4.x;MOV H5.w, 0.0;"},
    {"NRMH  H5.xyz, H7;", "DP3 H4.x, H7, H7;RSQ H4.x, H4.x;MUL H5.xyz, H7, H4.x;MOV H5.w, 0.0;"},
    {"NRMH  H5.xyz, H8;", "DP3 H4.x, H8, H8;RSQ H4.x, H4.x;MUL H5.xyz, H8, H4.x;MOV H5.w, 0.0;"},

    {"NRMH  H6.xyz, H0;", "DP3 H3.x, H0, H0;RSQ H3.x, H3.x;MUL H6.xyz, H0, H3.x;MOV H6.w, 0.0;"},
    {"NRMH  H6.xyz, H1;", "DP3 H3.x, H1, H1;RSQ H3.x, H3.x;MUL H6.xyz, H1, H3.x;MOV H6.w, 0.0;"},
    {"NRMH  H6.xyz, H2;", "DP3 H3.x, H2, H2;RSQ H3.x, H3.x;MUL H6.xyz, H2, H3.x;MOV H6.w, 0.0;"},
    {"NRMH  H6.xyz, H5;", "DP3 H3.x, H5, H5;RSQ H3.x, H3.x;MUL H6.xyz, H5, H3.x;MOV H6.w, 0.0;"},
    {"NRMH  H6.xyz, H8;", "DP3 H3.x, H8, H8;RSQ H3.x, H3.x;MUL H6.xyz, H8, H3.x;MOV H6.w, 0.0;"},
    {"NRMH  H6.xyz, H10;", "DP3 H3.x, H10, H10;RSQ H3.x, H3.x;MUL H6.xyz, H10, H3.x;MOV H6.w, 0.0;"},

    {"NRMH  H7.xyz, H0;", "DP3 H1.x, H0, H0;RSQ H1.x, H1.x;MUL H7.xyz, H0, H1.x;MOV H7.w, 0.0;"},
    {"NRMH  H7.xyz, H1;", "DP3 H1.x, H1, H1;RSQ H1.x, H1.x;MUL H7.xyz, H1, H1.x;MOV H7.w, 0.0;"},
    {"NRMH  H7.xyz, H5;", "DP3 H1.x, H5, H5;RSQ H1.x, H1.x;MUL H7.xyz, H5, H1.x;MOV H7.w, 0.0;"},
    {"NRMH  H7.xyz, H6;", "DP3 H1.x, H6, H6;RSQ H1.x, H1.x;MUL H7.xyz, H6, H1.x;MOV H7.w, 0.0;"},
    {"NRMH  H7.xyz, H7;", "DP3 H1.x, H7, H7;RSQ H1.x, H1.x;MUL H7.xyz, H7, H1.x;MOV H7.w, 0.0;"},
    {"NRMH  H7.xyz, H9;", "DP3 H1.x, H9, H9;RSQ H1.x, H1.x;MUL H7.xyz, H9, H1.x;MOV H7.w, 0.0;"},

    {"NRMH  H8.xyz, H3;", "DP3 H1.x, H3, H3;RSQ H1.x, H1.x;MUL H8.xyz, H3, H1.x;MOV H8.w, 0.0;"},
    {"NRMH  H8.xyz, H8;", "DP3 H1.x, H8, H8;RSQ H1.x, H1.x;MUL H8.xyz, H8, H1.x;MOV H8.w, 0.0;"},
    {"NRMH  H9.xyz, H9;", "DP3 H1.x, H9, H9;RSQ H1.x, H1.x;MUL H9.xyz, H9, H1.x;MOV H9.w, 0.0;"},
    {"NRMH  H10.xyz, H10;", "DP3 H1.x, H10, H10;RSQ H1.x, H1.x;MUL H10.xyz, H10, H1.x;MOV H10.w, 0.0;"},

    {"NRMH  H6.xyz, c[7];", "DP3 H2.x, c[7], c[7];RSQ H2.x, H2.x;MUL H6.xyz, c[7], H2.x;"},
    {"NRMH  H6.xyz, c[10];", "DP3 H3.x, c[10], c[10];RSQ H3.x, H3.x;MUL H6.xyz, c[10], H3.x;"},
    {"NRMH  H7.xyz, c[10];", "DP3 H3.x, c[10], c[10];RSQ H3.x, H3.x;MUL H7.xyz, c[10], H3.x;"},

    {"NRMH  H0.xyz, H1.xzww;",
     "MOV H5.x, H1.x; MOV H5.y, H1.z; MOV H5.z, H1.w; MOV H5.w, H1.w; DP3 H4.x, H5, H5; RSQ H4.x, H4.x; MUL H0.xyz, H5, H4.x;"},
    {"NRMH  H0.xyz, H5.xzww;",
     "MOV H1.x, H5.x; MOV H1.z, H5.y; MOV H1.z, H5.w; MOV H1.w, H5.w; DP3 H3.x, H1, H1; RSQ H3.x, H3.x; MUL H0.xyz, H1, H3.x;"},
    {"NRMH  H0.xyz, H6.xyww;",
     "MOV H1.x, H6.x; MOV H1.z, H6.y; MOV H1.z, H6.w; MOV H1.w, H6.w; DP3 H3.x, H1, H1; RSQ H3.x, H3.x; MUL H0.xyz, H1, H3.x;"},
    {"NRMH  H1.xyz, H2.xyww;",
     "MOV H2.x, H2.x; MOV H2.y, H2.y; MOV H2.z, H2.w; MOV H2.w, H2.w; DP3 H3.x, H2, H2; RSQ H3.x, H3.x; MUL H1.xyz, H2, H3.x;"},
    {"NRMH  H1.xyz, H3.xyww;",
     "MOV H2.x, H3.x; MOV H2.y, H3.y; MOV H2.z, H3.w; MOV H2.w, H3.w; DP3 H3.x, H2, H2; RSQ H3.x, H3.x; MUL H1.xyz, H2, H3.x;"},
    {"NRMH  H2.xyz, H4.xyww;",
     "MOV H1.x, H4.x; MOV H1.y, H4.y; MOV H1.z, H4.w; MOV H1.w, H4.w; DP3 H0.x, H1, H1; RSQ H0.x, H0.x; MUL H2.xyz, H1, H0.x;"},
    {"NRMH  H2.xyz, H5.xyww;",
     "MOV H1.x, H5.x; MOV H1.y, H5.y; MOV H1.z, H5.w; MOV H1.w, H5.w; DP3 H0.x, H1, H1; RSQ H0.x, H0.x; MUL H2.xyz, H1, H0.x;"},
    {"NRMH  H2.xyz, H6.xyww;",
     "MOV H1.x, H6.x; MOV H1.y, H6.y; MOV H1.z, H6.w; MOV H1.w, H6.w; DP3 H0.x, H1, H1; RSQ H0.x, H0.x; MUL H2.xyz, H1, H0.x;"},

    {"DP2H  H0.x, H5.yxzw, H5.yxzw;", "MUL HC.x, H5.y, H5.y; MUL HC.y, H5.x, H5.x; ADD H0.x, HC.x, HC.y;"},
    {"DP2H  H0.w, H6.yxzw, H6.yxzw;", "MUL HC.x, H6.y, H6.y; MUL HC.y, H6.x, H6.x; ADD H0.w, HC.x, HC.y;"},
    {"DP2H  H1.w, H0.yxzw, H0.yxzw;", "MUL HC.x, H0.y, H0.y; MUL HC.y, H0.x, H0.x; ADD H1.w, HC.x, HC.y;"},
    {"DP2H  H1.x, H1.yxzw, H1.yxzw;", "MUL HC.x, H1.y, H1.y; MUL HC.y, H1.x, H1.x; ADD H1.x, HC.x, HC.y;"},
    {"DP2H  H1.y, H5.yxzw, H5.yxzw;", "MUL HC.x, H5.y, H5.y; MUL HC.y, H5.x, H5.x; ADD H1.w, HC.y, HC.y;"},
    {"DP2H  H1.w, H1.yxzw, H1.yxzw;", "MUL HC.x, H1.y, H1.y; MUL HC.y, H1.x, H1.x; ADD H1.w, HC.x, HC.y;"},
    {"DP2H  H1.x, H3.yxzw, H3.yxzw;", "MUL HC.x, H3.y, H3.y; MUL HC.y, H3.x, H3.x; ADD H1.x, HC.x, HC.y;"},
    {"DP2H  H1.w, H6.yxzw, H6.yxzw;", "MUL HC.x, H6.y, H6.y; MUL HC.y, H6.x, H6.x; ADD H1.w, HC.x, HC.y;"},
    {"DP2H  H2.w, H4.yxzw, H4.yxzw;", "MUL HC.x, H4.y, H4.y; MUL HC.y, H4.x, H4.x; ADD H2.w, HC.x, HC.y;"},
    {"DP2H  H2.w, H5.yxzw, H5.yxzw;", "MUL HC.x, H5.y, H5.y; MUL HC.y, H5.x, H5.x; ADD H2.w, HC.x, HC.y;"}, // MJ4Evo

    {"DP2H  H0.w, H0.yxzw, H0.yxzw;", "MUL HC.x, H0.y, H0.y; MUL HC.y, H0.x, H0.x; ADD H0.w, HC.x, HC.y;"},
    {"DP2H  H0.x, H0.yxzw, H0.yxzw;", "MUL HC.x, H0.y, H0.y; MUL HC.y, H0.x, H0.x; ADD H0.x, HC.x, HC.y;"},
    {"DP2H  H0.w, H1.yxzw, H1.yxzw;", "MUL HC.x, H1.y, H1.y; MUL HC.y, H1.x, H1.x; ADD H0.w, HC.x, HC.y;"},
    {"DP2H  H0.w, H2.yxzw, H2.yxzw;", "MUL HC.x, H2.y, H2.y; MUL HC.y, H2.x, H2.x; ADD H0.w, HC.x, HC.y;"},
    {"DP2H  H0.w, H3.yxzw, H3.yxzw;", "MUL HC.x, H3.y, H3.y; MUL HC.y, H3.x, H3.x; ADD H0.w, HC.x, HC.y;"},
    {"DP2H  H0.y, H3.yxzw, H3.yxzw;", "MUL HC.x, H3.y, H3.y; MUL HC.y, H3.x, H3.x; ADD H0.y, HC.x, HC.y;"},
    {"DP2H  H0.w, H4.yxzw, H4.yxzw;", "MUL HC.x, H4.y, H4.y; MUL HC.y, H4.x, H4.x; ADD H0.w, HC.x, HC.y;"},
    {"DP2H  H0.x, H4.yxzw, H4.yxzw;", "MUL HC.x, H4.y, H4.y; MUL HC.y, H4.x, H4.x; ADD H0.x, HC.x, HC.y;"},
    {"DP2H  H0.y, H4.yxzw, H4.yxzw;", "MUL HC.x, H4.y, H4.y; MUL HC.y, H4.x, H4.x; ADD H0.y, HC.x, HC.y;"},
    {"DP2H  H0.w, H5.yxzw, H5.yxzw;", "MUL HC.x, H5.y, H5.y; MUL HC.y, H5.x, H5.x; ADD H0.w, HC.x, HC.y;"},

    {"DP2H  H1.w, H2.yxzw, H2.yxzw;", "MUL HC.x, H2.y, H2.y; MUL HC.y, H2.x, H2.x; ADD H1.w, HC.x, HC.y;"},
    {"DP2H  H1.w, H3.yxzw, H3.yxzw;", "MUL HC.x, H3.y, H3.y; MUL HC.y, H3.x, H3.x; ADD H1.w, HC.x, HC.y;"},
    {"DP2H  H1.w, H4.yxzw, H4.yxzw;", "MUL HC.x, H4.y, H4.y; MUL HC.y, H4.x, H4.x; ADD H1.w, HC.x, HC.y;"},
    {"DP2H  H1.y, H4.yxzw, H4.yxzw;", "MUL HC.x, H4.y, H4.y; MUL HC.y, H4.x, H4.x; ADD H1.y, HC.x, HC.y;"},
    {"DP2H  H1.w, H5.yxzw, H5.yxzw;", "MUL HC.x, H5.y, H5.y; MUL HC.y, H5.x, H5.x; ADD H1.w, HC.x, HC.y;"},
    {"DP2H  H2.x, H2.yxzw, H2.yxzw;", "MUL HC.x, H2.y, H2.y; MUL HC.y, H2.x, H2.x; ADD H2.x, HC.x, HC.y;"},
    {"DP2H  H2.x, H5.yxzw, H5.yxzw;", "MUL HC.x, H5.y, H5.y; MUL HC.y, H5.x, H5.x; ADD H2.x, HC.x, HC.y;"},

    {"NRMH  H0.xyz, c[4];", "DP3 H2.x, c[4], c[4];RSQ H2.x, H2.x;MUL H0.xyz, c[4], H2.x;"},
    {"NRMH  H1.xyz, c[4];", "DP3 H2.x, c[4], c[4];RSQ H2.x, H2.x;MUL H1.xyz, c[4], H2.x;"},
    {"NRMH  H2.xyz, c[4];", "DP3 H1.x, c[4], c[4];RSQ H1.x, H1.x;MUL H2.xyz, c[4], H1.x;"},
    {"NRMH  H3.xyz, c[4];", "DP3 H2.x, c[4], c[4];RSQ H2.x, H2.x;MUL H3.xyz, c[4], H2.x;"},
    {"NRMH  H4.xyz, c[4];", "DP3 H3.x, c[4], c[4];RSQ H3.x, H3.x;MUL H4.xyz, c[4], H3.x;"},
    {"NRMH  H5.xyz, c[4];", "DP3 H4.x, c[4], c[4];RSQ H4.x, H4.x;MUL H5.xyz, c[4], H4.x;"},

    {"NRMH  H0.xyz, c[7];", "DP3 H2.x, c[7], c[7];RSQ H2.x, H2.x;MUL H0.xyz, c[7], H2.x;"},
    {"NRMH  H1.xyz, c[7];", "DP3 H2.x, c[7], c[7];RSQ H2.x, H2.x;MUL H1.xyz, c[7], H2.x;"},
    {"NRMH  H2.xyz, c[7];", "DP3 H1.x, c[7], c[7];RSQ H1.x, H1.x;MUL H2.xyz, c[7], H1.x;"},
    {"NRMH  H3.xyz, c[7];", "DP3 H2.x, c[7], c[7];RSQ H2.x, H2.x;MUL H3.xyz, c[7], H2.x;"},
    {"NRMH  H4.xyz, c[7];", "DP3 H3.x, c[7], c[7];RSQ H3.x, H3.x;MUL H4.xyz, c[7], H3.x;"},
    {"NRMH  H5.xyz, c[7];", "DP3 H2.x, c[7], c[7];RSQ H2.x, H2.x;MUL H5.xyz, c[7], H2.x;"},

    {"NRMH  H0.xyz, c[10];", "DP3 H1.x, c[10], c[10];RSQ H1.x, H1.x;MUL H0.xyz, c[10], H1.x;"},
    {"NRMH  H1.xyz, c[10];", "DP3 H2.x, c[10], c[10];RSQ H2.x, H2.x;MUL H1.xyz, c[10], H2.x;"},
    {"NRMH  H2.xyz, c[10];", "DP3 H3.x, c[10], c[10];RSQ H3.x, H3.x;MUL H2.xyz, c[10], H3.x;"},
    {"NRMH  H3.xyz, c[10];", "DP3 H2.x, c[10], c[10];RSQ H2.x, H2.x;MUL H3.xyz, c[10], H2.x;"},
    {"NRMH  H4.xyz, c[10];", "DP3 H3.x, c[10], c[10];RSQ H3.x, H3.x;MUL H4.xyz, c[10], H3.x;"},
    {"NRMH  H5.xyz, c[10];", "DP3 H3.x, c[10], c[10];RSQ H3.x, H3.x;MUL H5.xyz, c[10], H3.x;"},

    {"NRMH  H0.xyz, fragment.texcoord[4];",
     "DP3 H1.x, fragment.texcoord[4], fragment.texcoord[4];RSQ H1.x, H1.x;MUL H0.xyz, fragment.texcoord[4], H1.x;"},
    {"NRMH  H1.xyz, fragment.texcoord[4];",
     "DP3 H2.x, fragment.texcoord[4], fragment.texcoord[4];RSQ H2.x, H2.x;MUL H1.xyz, fragment.texcoord[4], H2.x;"},
    {"NRMH  H2.xyz, fragment.texcoord[4];",
     "DP3 H1.x, fragment.texcoord[4], fragment.texcoord[4];RSQ H1.x, H1.x;MUL H2.xyz, fragment.texcoord[4], H1.x;"},
    {"NRMH  H3.xyz, fragment.texcoord[4];",
     "DP3 H1.x, fragment.texcoord[4], fragment.texcoord[4];RSQ H1.x, H1.x;MUL H3.xyz, fragment.texcoord[4], H1.x;"},

    {"NRMH  H0.xyz, fragment.texcoord[3];",
     "DP3 H1.x, fragment.texcoord[3], fragment.texcoord[3];RSQ H1.x, H1.x;MUL H0.xyz, fragment.texcoord[3], H1.x;"},
    {"NRMH  H1.xyz, fragment.texcoord[3];",
     "DP3 H2.x, fragment.texcoord[3], fragment.texcoord[3];RSQ H2.x, H2.x;MUL H1.xyz, fragment.texcoord[3], H2.x;"},
    {"NRMH  H2.xyz, fragment.texcoord[3];",
     "DP3 H1.x, fragment.texcoord[3], fragment.texcoord[3];RSQ H1.x, H1.x;MUL H2.xyz, fragment.texcoord[3], H1.x;"},
    {"NRMH  H3.xyz, fragment.texcoord[3];",
     "DP3 H1.x, fragment.texcoord[3], fragment.texcoord[3];RSQ H1.x, H1.x;MUL H3.xyz, fragment.texcoord[3], H1.x;"},
    {"NRMH  H4.xyz, fragment.texcoord[3];",
     "DP3 H1.x, fragment.texcoord[3], fragment.texcoord[3];RSQ H1.x, H1.x;MUL H4.xyz, fragment.texcoord[3], H1.x;"},
    {"NRMH  H5.xyz, fragment.texcoord[3];",
     "DP3 H1.x, fragment.texcoord[3], fragment.texcoord[3];RSQ H1.x, H1.x;MUL H5.xyz, fragment.texcoord[3], H1.x;"},

    {"NRMH  H0.xyz, H1.xyww;",
     "MOV H5.x, H1.x; MOV H5.y, H1.y; MOV H5.z, H1.w; MOV H5.w, H1.w; DP3 H4.x, H5, H5; RSQ H4.x, H4.x; MUL H0.xyz, H5, H4.x;"},
    {"NRMH  H0.xyz, H2.xyww;",
     "MOV H5.x, H2.x; MOV H5.y, H2.y; MOV H5.z, H2.w; MOV H5.w, H2.w; DP3 H4.x, H5, H5; RSQ H4.x, H4.x; MUL H0.xyz, H5, H4.x;"},
    {"NRMH  H0.xyz, H3.xyww;",
     "MOV H1.x, H3.x; MOV H1.y, H3.y; MOV H1.z, H3.w; MOV H1.w, H3.w; DP3 H2.x, H1, H1; RSQ H2.x, H2.x; MUL H0.xyz, H1, H2.x;"},
    {"NRMH  H0.xyz, H4.xyww;",
     "MOV H1.x, H4.x; MOV H1.y, H4.y; MOV H1.z, H4.w; MOV H1.w, H4.w; DP3 H3.x, H1, H1; RSQ H3.x, H3.x; MUL H0.xyz, H1, H3.x;"},

    {"NRMH  H1.xyz, H0.xyww;",
     "MOV H2.x, H0.x; MOV H2.y, H0.y; MOV H2.z, H0.w; MOV H2.w, H0.w; DP3 H3.x, H2, H2; RSQ H3.x, H3.x; MUL H1.xyz, H2, H3.x;"},
    {"NRMH  H1.xyz, H4.xyww;",
     "MOV H2.x, H4.x; MOV H2.y, H4.y; MOV H2.z, H4.w; MOV H2.w, H4.w; DP3 H3.x, H2, H2; RSQ H3.x, H3.x; MUL H1.xyz, H2, H3.x;"},
    {"NRMH  H1.xyz, H5.xyww;",
     "MOV H4.x, H5.x; MOV H4.y, H5.y; MOV H4.z, H5.w; MOV H4.w, H5.w; DP3 H3.x, H4, H4; RSQ H3.x, H3.x; MUL H1.xyz, H4, H3.x;"},

    {"NRMH  H2.xyz, H3.xyww;",
     "MOV H1.x, H3.x; MOV H1.y, H3.y; MOV H1.z, H3.w; MOV H1.w, H3.w; DP3 H0.x, H1, H1; RSQ H0.x, H0.x; MUL H2.xyz, H1, H0.x;"},

    {"NRMH  H4.xyz, H2.xyww;",
     "MOV H1.x, H2.x; MOV H1.y, H2.y; MOV H1.z, H2.w; MOV H1.w, H2.w; DP3 H3.x, H1, H1; RSQ H3.x, H3.x; MUL H4.xyz, H1, H3.x;"},
    {"NRMH  H4.xyz, H3.xyww;",
     "MOV H1.x, H3.x; MOV H1.y, H3.y; MOV H1.z, H3.w; MOV H1.w, H3.w; DP3 H2.x, H1, H1; RSQ H2.x, H2.x; MUL H4.xyz, H1, H2.x;"},

    {"NRMH  H5.xyz, H2.xyww;",
     "MOV H1.x, H2.x; MOV H1.y, H2.y; MOV H1.z, H2.w; MOV H1.w, H2.w; DP3 H3.x, H1, H1; RSQ H3.x, H3.x; MUL H5.xyz, H1, H3.x;"},
    {"NRMH  H5.xyz, H3.xyww;",
     "MOV H4.x, H3.x; MOV H4.y, H3.y; MOV H4.z, H3.w; MOV H4.w, H3.w; DP3 H3.x, H4, H4; RSQ H3.x, H3.x; MUL H5.xyz, H4, H3.x;"},
    {"NRMH  H5.xyz, H4.xyww;",
     "MOV H2.x, H4.x; MOV H2.y, H4.y; MOV H2.z, H4.w; MOV H2.w, H4.w; DP3 H3.x, H2, H2; RSQ H3.x, H3.x; MUL H5.xyz, H2, H3.x;"},

    {"NRMH  H6.xyz, H3.xyww;",
     "MOV H1.x, H3.x; MOV H1.y, H3.y; MOV H1.z, H3.w; MOV H1.w, H3.w; DP3 H2.x, H1, H1; RSQ H2.x, H2.x; MUL H6.xyz, H1, H2.x;"},
    {"NRMH  H6.xyz, H4.xyww;",
     "MOV H2.x, H4.x; MOV H2.y, H4.y; MOV H2.z, H4.w; MOV H2.w, H4.w; DP3 H3.x, H2, H2; RSQ H3.x, H3.x; MUL H6.xyz, H2, H3.x;"},

    {"NRMH  H0.xyz, H4.xzww;",
     "MOV H1.x, H4.x; MOV H1.y, H4.z; MOV H1.z, H4.w; MOV H1.w, H4.w; DP3 H3.x, H1, H1; RSQ H3.x, H3.x; MUL H0.xyz, H1, H3.x;"},
    {"NRMH  H4.xyz, H2.yzww;",
     "MOV H1.x, H2.y; MOV H1.y, H2.z; MOV H1.z, H2.w; MOV H1.w, H2.w; DP3 H3.x, H1, H1; RSQ H3.x, H3.x; MUL H4.xyz, H1, H3.x;"},

    {"NRMH  H0.xyz, H0;", "DP3 H2.x, H0, H0;RSQ H2.x, H2.x;MUL H0.xyz, H0, H2.x;MOV H0.w, 0.0;"},
    {"NRMH  H0.xyz, H1;", "DP3 H2.x, H1, H1;RSQ H2.x, H2.x;MUL H0.xyz, H1, H2.x;MOV H0.w, 0.0;"},
    {"NRMH  H0.xyz, H2;", "DP3 H1.x, H2, H2;RSQ H1.x, H1.x;MUL H0.xyz, H2, H1.x;MOV H0.w, 0.0;"},
    {"NRMH  H0.xyz, H3;", "DP3 H2.x, H3, H3;RSQ H2.x, H2.x;MUL H0.xyz, H3, H2.x;MOV H0.w, 0.0;"},
    {"NRMH  H0.xyz, H4;", "DP3 H2.x, H4, H4;RSQ H2.x, H2.x;MUL H0.xyz, H4, H2.x;MOV H0.w, 0.0;"},
    {"NRMH  H0.xyz, H5;", "DP3 H1.x, H5, H5;RSQ H1.x, H1.x;MUL H0.xyz, H5, H1.x;MOV H0.w, 0.0;"},
    {"NRMH  H0.xyz, H6;", "DP3 H4.x, H6, H6;RSQ H4.x, H4.x;MUL H0.xyz, H6, H4.x;MOV H0.w, 0.0;"},

    {"NRMH  H1.xyz, H0;", "DP3 H2.x, H0, H0;RSQ H2.x, H2.x;MUL H1.xyz, H0, H2.x;MOV H1.w, 0.0;"},
    {"NRMH  H1.xyz, H1;", "DP3 H2.x, H1, H1;RSQ H2.x, H2.x;MUL H1.xyz, H1, H2.x;MOV H1.w, 0.0;"},
    {"NRMH  H1.xyz, H2;", "DP3 H0.x, H2, H2;RSQ H0.x, H0.x;MUL H1.xyz, H2, H0.x;MOV H1.w, 0.0;"},
    {"NRMH  H1.xyz, H3;", "DP3 H2.x, H3, H3;RSQ H2.x, H2.x;MUL H1.xyz, H3, H2.x;MOV H1.w, 0.0;"},
    {"NRMH  H1.xyz, H4;", "DP3 H3.x, H4, H4;RSQ H3.x, H3.x;MUL H1.xyz, H4, H3.x;MOV H1.w, 0.0;"},
    {"NRMH  H1.xyz, H5;", "DP3 H2.x, H5, H5;RSQ H2.x, H2.x;MUL H1.xyz, H5, H2.x;MOV H1.w, 0.0;"},
    {"NRMH  H1.xyz, H6;", "DP3 H4.x, H6, H6;RSQ H4.x, H4.x;MUL H1.xyz, H6, H4.x;MOV H1.w, 0.0;"},

    {"NRMH  H2.xyz, H0;", "DP3 H1.x, H0, H0;RSQ H1.x, H1.x;MUL H2.xyz, H0, H1.x;MOV H2.w, 0.0;"},
    {"NRMH  H2.xyz, H1;", "DP3 H0.x, H1, H1;RSQ H0.x, H0.x;MUL H2.xyz, H1, H0.x;MOV H2.w, 0.0;"},
    {"NRMH  H2.xyz, H2;", "DP3 H1.x, H2, H2;RSQ H1.x, H1.x;MUL H2.xyz, H2, H1.x;MOV H2.w, 0.0;"},
    {"NRMH  H2.xyz, H3;", "DP3 H1.x, H3, H3;RSQ H1.x, H1.x;MUL H2.xyz, H3, H1.x;MOV H2.w, 0.0;"},
    {"NRMH  H2.xyz, H4;", "DP3 H1.x, H4, H4;RSQ H1.x, H1.x;MUL H2.xyz, H4, H1.x;MOV H2.w, 0.0;"},
    {"NRMH  H2.xyz, H5;", "DP3 H4.x, H5, H5;RSQ H4.x, H4.x;MUL H2.xyz, H5, H4.x;MOV H2.w, 0.0;"},

    {"NRMH  H3.xyz, H0;", "DP3 H2.x, H0, H0;RSQ H2.x, H2.x;MUL H3.xyz, H0, H2.x;MOV H3.w, 0.0;"},
    {"NRMH  H3.xyz, H1;", "DP3 H4.x, H1, H1;RSQ H4.x, H4.x;MUL H3.xyz, H1, H4.x;MOV H3.w, 0.0;"},
    {"NRMH  H3.xyz, H2;", "DP3 H1.x, H2, H2;RSQ H1.x, H1.x;MUL H3.xyz, H2, H1.x;MOV H3.w, 0.0;"},
    {"NRMH  H3.xyz, H3;", "DP3 H2.x, H3, H3;RSQ H2.x, H2.x;MUL H3.xyz, H3, H2.x;MOV H3.w, 0.0;"},
    {"NRMH  H3.xyz, H4;", "DP3 H1.x, H4, H4;RSQ H1.x, H1.x;MUL H3.xyz, H4, H1.x;MOV H3.w, 0.0;"},
    {"NRMH  H3.xyz, H5;", "DP3 H2.x, H5, H5;RSQ H2.x, H2.x;MUL H3.xyz, H5, H2.x;MOV H3.w, 0.0;"},

    {"NRMH  H4.xyz, H0;", "DP3 H2.x, H0, H0;RSQ H2.x, H2.x;MUL H4.xyz, H0, H2.x;MOV H4.w, 0.0;"},
    {"NRMH  H4.xyz, H1;", "DP3 H0.x, H1, H1;RSQ H0.x, H0.x;MUL H4.xyz, H1, H0.x;MOV H4.w, 0.0;"},
    {"NRMH  H4.xyz, H2;", "DP3 H3.x, H2, H2;RSQ H3.x, H3.x;MUL H4.xyz, H2, H3.x;MOV H4.w, 0.0;"},
    {"NRMH  H4.xyz, H3;", "DP3 H2.x, H3, H3;RSQ H2.x, H2.x;MUL H4.xyz, H3, H2.x;MOV H4.w, 0.0;"},
    {"NRMH  H4.xyz, H4;", "DP3 H2.x, H4, H4;RSQ H2.x, H2.x;MUL H4.xyz, H4, H2.x;MOV H4.w, 0.0;"},
    {"NRMH  H4.xyz, H5;", "DP3 H2.x, H5, H5;RSQ H2.x, H2.x;MUL H4.xyz, H5, H2.x;MOV H4.w, 0.0;"},
    {"NRMH  H4.xyz, H6;", "DP3 H3.x, H6, H6;RSQ H3.x, H3.x;MUL H4.xyz, H6, H3.x;MOV H4.w, 0.0;"},

    {"NRMH  H5.xyz, H1;", "DP3 H2.x, H1, H1;RSQ H2.x, H2.x;MUL H5.xyz, H1, H2.x;MOV H5.w, 0.0;"},
    {"NRMH  H5.xyz, H3;", "DP3 H1.x, H3, H3;RSQ H1.x, H1.x;MUL H5.xyz, H3, H1.x;MOV H5.w, 0.0;"},
    {"NRMH  H5.xyz, H4;", "DP3 H3.x, H4, H4;RSQ H3.x, H3.x;MUL H5.xyz, H4, H3.x;MOV H5.w, 0.0;"},
    {"NRMH  H5.xyz, H5;", "DP3 H2.x, H5, H5;RSQ H2.x, H2.x;MUL H5.xyz, H5, H2.x;MOV H5.w, 0.0;"},
    {"NRMH  H5.xyz, H6;", "DP3 H4.x, H6, H6;RSQ H4.x, H4.x;MUL H5.xyz, H6, H4.x;MOV H5.w, 0.0;"},

    {"NRMH  H6.xyz, H4;", "DP3 H1.x, H4, H4;RSQ H1.x, H1.x;MUL H6.xyz, H4, H1.x;MOV H6.w, 0.0;"},
    {"NRMH  H6.xyz, H6;", "DP3 H4.x, H6, H6;RSQ H4.x, H4.x;MUL H6.xyz, H6, H4.x;MOV H6.w, 0.0;"},
    {"NRMH  H6.xyz, H7;", "DP3 H3.x, H7, H7;RSQ H3.x, H3.x;MUL H6.xyz, H7, H3.x;MOV H6.w, 0.0;"},

    {"NRMH  H7.xyz, H4;", "DP3 H1.x, H4, H4;RSQ H1.x, H1.x;MUL H7.xyz, H4, H1.x;MOV H7.w, 0.0;"}};

int mj4FsMesaCount = sizeof(mj4FsMesa) / sizeof(SearchReplace);

// Vertex
SearchReplace mj4VsMesa[] = {{"OPTION NV_vertex_program3;", "#OPTION NV_vertex_program3;"},

                             {"BB1:", " "},
                             {"BB2:", " "},
                             {"BB3:", " "},
                             {"BB4:", " "},
                             {"BB5:", " "},
                             {"BB6:", " "},
                             {"BB7:", " "},
                             {"BB8:", " "},
                             {"BB9:", " "},
                             /*{"MUL_SAT ", "MUL "},*/

                             {"MUL_SAT R0.w, R1.x, R0;", "MUL R0.w, R1.x, R0;MAX R0.w, R0.w, 0.0;MIN R0.w, R0.w, 1.0;"},
                             {"MUL_SAT R1.x, R1, R0.w;", "MUL R1.x, R1, R0.w;MAX R1.x, R1.x, 0.0;MIN R1.x, R1.x, 1.0;"},
                             {"MUL_SAT R1.w, R2, R1;", "MUL R1.w, R2, R1;MAX R1.w, R1.w, 0.0;MIN R1.w, R1.w, 1.0;"},
                             {"MUL_SAT R1.w, R1.x, R0;", "MUL R1.w, R1.x, R0;MAX R1.w, R1.w, 0.0;MIN R1.w, R1.w, 1.0;"},
                             {"MUL_SAT R2.w, R2, R1;", "MUL R2.w, R2, R1;MAX R2.w, R2.w, 0.0;MIN R2.w, R2.w, 1.0;"},
                             {"MUL_SAT R3.x, R2.w, R1.w;", "MUL R3.x, R2.w, R1.w;MAX R3.x, R3.x, 0.0;MIN R3.x, R3.x, 1.0;"},

                             {"BRA ", "#BRA "},
                             {"MOVC ", "MOV "},

                             {"ARL   A0.x, vertex.attrib[15];", "ARL   A0.x, vertex.attrib[15].x;"},
                             {"(NE.x)", " "},
                             {"(NE)", " "},
                             {"SEQC", "#SEQC "}};

int mj4VsMesaCount = sizeof(mj4VsMesa) / sizeof(SearchReplace);
